<html>

<head>
    <meta charset="utf-8" />
    <title>Ghreen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--
        Used link element from digitalocean
        @author: Erin Glass
        @see: https://www.digitalocean.com/community/tutorials/how-to-add-a-favicon-to-your-website-with-html--%3E 
    -->
    <link rel="shortcut icon" type="image/png" href="../images/logo_final.png" />
    <!-- End of source -->

    <!-- Bootstrap stylesheet -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">

    <!-- Our stylesheet(s) -->
    <link href="/css/universal.css" rel="stylesheet" />
    <link href="/css/questionnaire.css" rel="stylesheet" />
    <link href="/css/survey_page_9.css" rel="stylesheet" />

    <!-- Firebase Authentication -->
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css" />

</head>

<body>

    <a href="survey_page_8.html"><i class="fas fa-chevron-circle-left fa-2x"></i></a>

    <h1><i>Transportation</i></h1>

    <div id="question-container">
        <div id="question">
            <h2>How much do you travel by public transportation per week?</h2>
            <!-- Found this code from Carly's tech tip, see @link = https://www.notion.so/Tech-Tip-F006-How-do-I-make-nice-rows-of-buttons-08bd253aea9747a9bd77ff8cb27def9a -->
            <div class="container">
                <div class="row row-cols-1">
                    <div class="button" id="button1">
                        <input type="radio" id="b1" class="btn" name="answer"><label for="b1">Over 670 km</label>
                    </div>
                    <div class="button" id="button2">
                        <input type="radio" id="b2" class="btn" name="answer"><label for="b2">500 - 670 km</label>
                    </div>
                    <div class="button" id="button3">
                        <input type="radio" id="b3" class="btn" name="answer"><label for="b3">330 - 500 km</label>
                    </div>
                    <div class="button" id="button4">
                        <input type="radio" id="b4" class="btn" name="answer"><label for="b4">35 - 330 km</label>
                    </div>
                    <div class="button" id="button5">
                        <input type="radio" id="b5" class="btn" name="answer"><label for="b5">Under 35 km</label>
                    </div>
                    <div class="button" id="button6">
                        <input type="radio" id="b6" class="btn" name="answer"><label for="b6">Don't take public transporatation</label>
                    </div>
                </div>
            </div>

        </div>

        <button id="confirm" class="btn container-fluid mt-4" type="button">Confirm</button>

    </div>

    <!-- The link for Bootstrap 5.0, see @link = https://getbootstrap.com/docs/5.0/getting-started/introduction/ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
        crossorigin="anonymous"></script>

    <!-- JQuery link from Google, see @link = https://developers.google.com/speed/libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- Found this code on fontawesome, see @link = https://fontawesome.com/ -->
    <script src="https://kit.fontawesome.com/26da0e4274.js" crossorigin="anonymous"></script>

    <!-- Firebase App (the core Firebase SDK) must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

    <!-- Firebase products -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>

    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script>

    <!-- Ghreen specific firebase scripts -->
    <script src="/js/firebase_api_ghreen.js"> </script>
    <script>
        document.getElementById("confirm").addEventListener('click', function () {
            console.log("confirm clicked");
            getUserChoice();

            if (value == -1) {
                alert("Please select an option");
                return;

            } else {
                firebase.auth().onAuthStateChanged(function (user) {
                    console.log("Value = " + value);

                    /* Found this code from the official firebase guide on how to handle promises
                     * using return and .then =>
                     * source: https://firebase.google.com/docs/functions/terminate-functions
                     */
                    return db.collection("users").doc(user.uid).update({
                        'Q8': value
                    }).then(() => {
                        document.location.href = 'survey_page_10.html'
                    });
                    /* promise end 
                     * source: https://firebase.google.com/docs/functions/terminate-functions
                     */
                })
            }
        });

        var value = -1;
        /* getUserChoice start
        * I modified Carly's original code which was can be found here: 
        * source: https://www.notion.so/Tech-Tip-B006-How-do-I-get-the-values-of-checkboxes-and-save-to-Firestore-53516773f2e243e9a4dab0e283cf0dc7 
        * */
        function getUserChoice() {
            console.log("getUserChoice() called");

            if (document.getElementById("b1").checked == true) {
                console.log("button 1 clicked");
                value = 12;
            }

            if (document.getElementById("b2").checked == true) {
                console.log("button 2 clicked");
                value = 10;
            }

            if (document.getElementById("b3").checked == true) {
                console.log("button 3 clicked");
                value = 6;
            }

            if (document.getElementById("b4").checked == true) {
                console.log("button 4 clicked");
                value = 4;
            }

            if (document.getElementById("b5").checked == true) {
                console.log("button 5 clicked");
                value = 2;
            }

            if (document.getElementById("b6").checked == true) {
                console.log("button 6 clicked");
                value = 0;
            }
        }
        /* getUserChoice end
         * source: https://www.notion.so/Tech-Tip-B006-How-do-I-get-the-values-of-checkboxes-and-save-to-Firestore-53516773f2e243e9a4dab0e283cf0dc7
         */
    </script>
</body>

</html>