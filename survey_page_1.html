<!-- question1.html page
     Author: Brendan Lin
     Ver: 1.0
    -->
<!-- Bootstrap template used 
     Author: Twitter (Bootstrap)
     See: https://getbootstrap.com/docs/5.0/getting-started/introduction/-->

<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Used link element from digitalocean (start)
        Author: Erin Glass
        See: https://www.digitalocean.com/community/tutorials/how-to-add-a-favicon-to-your-website-with-html-->
    <link rel="shortcut icon" type="image/png" href="../images/logo_final.png" />
    <!-- Used link element from digitalocean (end)
           Author: Erin Glass
           See: https://www.digitalocean.com/community/tutorials/how-to-add-a-favicon-to-your-website-with-html-->

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">

    <!-- Our stylesheet(s) -->
    <link href="css/survey_page_1.css" rel="stylesheet" />
    <link href="css/universal.css" rel="stylesheet" />
    <link href="css/questionnaire.css" rel="stylesheet" />


    <title>Ghreen</title>
</head>

<body>
    <a href="survey_page_0.html"><i class="fas fa-chevron-circle-left fa-2x"></i></a>
    <h1><i>General</i></h1>

    <div id="content">
        <div id="questionContainer">
            <h2>How many people do you live with?</h2>
            <div id="question">
                <!-- b# = button number -->
                <div class="button" id="button1">
                    <input type="radio" id="b1" class="btn btn-secondary" name="answer">
                    <label for="b1">1</label>
                </div>
                <div class="button" id="button2">
                    <input type="radio" id="b2" class="btn btn-secondary" name="answer">
                    <label for="b2">2</label>
                </div>
                <div class="button" id="button3">
                    <input type="radio" id="b3" class="btn btn-secondary" name="answer">
                    <label for="b3">3</label>
                </div>
                <div class="button" id="button4">
                    <input type="radio" id="b4" class="btn btn-secondary" name="answer">
                    <label for="b4">4</label>
                </div>
                <div class="button" id="button5">
                    <input type="radio" id="b5" class="btn btn-secondary" name="answer">
                    <label for="b5">5</label>
                </div>
                <div class="button" id="button6">
                    <input type="radio" id="b6" class="btn btn-secondary" name="answer">
                    <label for="b6">6</label>
                </div>
                <div class="button" id="button7">
                    <input type="radio" id="b7" class="btn btn-secondary" name="answer">
                    <label for="b7">7+</label>
                </div>

            </div>
        </div>
        <!--         <a href="survey_page_2.html">
 --> <button id="confirm" class="btn container-fluid mt-4" type="button">Confirm</button>
        <!--             </a>
 -->
    </div>

    <!-- The link for Bootstrap 5.0, see @link = https://getbootstrap.com/docs/5.0/getting-started/introduction/ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
        crossorigin="anonymous"></script>

    <!-- JQuery link from Google, see @link = https://developers.google.com/speed/libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- Found this code on fontawesome, see @link = https://fontawesome.com/ -->
    <script src="https://kit.fontawesome.com/26da0e4274.js" crossorigin="anonymous"></script>

    <!-- Firebase App (the core Firebase SDK) must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

    <!-- Firebase products -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>

    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script>

    <!-- Ghreen specific firebase scripts -->
    <script src="/js/firebase_api_ghreen.js"> </script>
    <script>

        document.getElementById("confirm").addEventListener('click', function () {
            console.log("confirm() called");
            firebase.auth().onAuthStateChanged(function (user) {
                getUserChoice();
                console.log("Value = " + value);

                db.collection("users").doc(user.uid).update({
                    baseline: {
                        'number of people': value
                    }

                })
            })
        });

        /* getUserChoice start
        * I modified Carly's original code which was can be found here: 
        * source: https://www.notion.so/Tech-Tip-B006-How-do-I-get-the-values-of-checkboxes-and-save-to-Firestore-53516773f2e243e9a4dab0e283cf0dc7 */

        var value;
        function getUserChoice() {
            console.log("getUserChoice() called");

            if (document.getElementById("b1").checked == true) {
                console.log("button 1 clicked");
                value = 1;
            }

            if (document.getElementById("b2").checked == true) {
                console.log("button 2 clicked");
                value = 2;
            }

            if (document.getElementById("b3").checked == true) {
                console.log("button 3 clicked");
                value = 3;
            }

            if (document.getElementById("b4").checked == true) {
                console.log("button 4 clicked");
                value = 4;
            }

            if (document.getElementById("b5").checked == true) {
                console.log("button 5 clicked");
                value = 5;
            }

            if (document.getElementById("b6").checked == true) {
                console.log("button 6 clicked");
                value = 6;
            }

            if (document.getElementById("b7").checked == true) {
                console.log("button 7 clicked");
                value = 7;
            }
        }

        /* getUserChoice end
        * source: https://www.notion.so/Tech-Tip-B006-How-do-I-get-the-values-of-checkboxes-and-save-to-Firestore-53516773f2e243e9a4dab0e283cf0dc7 */

    </script>


</body>

</html>